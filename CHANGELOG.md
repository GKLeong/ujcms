# UJCMS 发版说明

## ujcms-3.0.1 (2022-06-15)

* 修复：下载链接失效问题
* 修复：上传文件后缀限制区分大小写问题
* 修复：管理员后台权限菜单显示空菜单问题
* 修复：图片上传都默认生成了缩略图
* 修复：删除栏目静态页只删除第一页问题
* 修复：栏目静态页只生成前几页的情况下，后几页地址还是静态页地址，导致404错误

## ujcms-3.0.0 (2022-06-12)

* 新增：系统信息功能
* 新增：密码使用国密PBKDF2WithHmacSM3加密
* 新增：登录时密码传输使用国密SM2非对称加密
* 新增：JWT使用国密HmacSM3加密
* 新增：JWT token使用国密SM4加密
* 新增：随机密钥生成功能
* 新增：前台模板使用escape标签处理XSS和空值问题
* 新增：后台管理界面多页签功能
* 新增：后台管理界面session失效后，自动显示登录框，登录后保留在原页面，防止页面数据丢失
* 新增：区块项新增功能
* 新增：DOC导入功能
* 新增：文库转换功能
* 新增：文库封面自动截图
* 新增：文章管理增加Markdown编辑器
* 新增：附件、HTML静态页、模板支持对象存储（MinIO、阿里云对象存储、腾讯云对象存储、七牛云对象存储）
* 优化：富文本编辑器的字体从16px改为14px
* 优化：富文本编辑器即时校验功能
* 优化：增加上传功能的错误提示
* 优化：application.properties改为application.yaml，避免注释的中文无法在普通编辑器中显示
* 修复：文章管理图片集上传框未对齐
* 修复：删除有图片集的文章报错
* 修复：视频无法上传

### 升级指南

* 使用escape标签处理XSS和空值。所有freemarker页面使用`[#escape x as (x)!?html]`开头和`[/#escape]`结尾；使用`[#noescape]...[/#noescape]`功能替换原有的`?no_esc`
* 密码需用新算法重置

## ujcms-2.0.2 (2022-03-21)

* 修复：文章管理中没有编辑器的页面无法提交

## ujcms-2.0.1 (2022-03-19)

* 许可协议由 AGPL-3 改为 GPL-2
* 开放组织管理功能
* 增加全局设置中栏目URL和文章URL自定义地址的合法校验
* 增加站点设置中域名的合法校验
* 修复：前台搜索报错（ChannelInnerBase不能转换为Anchor）
* 升级owasp-java-html-sanitizer组件版本至20211018.2
* 升级guava组件版本至30.1-jre

## ujcms-2.0.0 (2022-03-08)

* 新增静态页生成功能
* 新增静态页设置功能
* 新增任务管理功能
* 新增防盗链下载功能
* 新增下载文件名可为中文
* 数据库表结构自动创建及自动升级功能
* 首次运行数据自动初始化
* 支持国产数据库
* 使用vite2代替webpack
* 升级到element-plus-2.0正式版
* 修复新窗口打开选项无效的问题
* 修复api/auth/jwt/login登录接口不加Authorization的header会出现403的问题

## ujcms-1.0.0 (2022-01-09)

1. 内容
  * 文章管理
  * 栏目管理
  * 区块管理
  * 附件管理
  * 生成管理
2. 配置
  * 全局设置
  * 站点设置
  * 模型管理
  * 区块设置
  * 字典类型
  * 字典数据
3. 用户
  * 用户管理
  * 角色管理
  * 用户组管理
  * 组织管理
4. 系统
  * 站点管理
  * 储存点管理
