import{d as ze,p as We,r as f,a1 as W,v as Je,a as w,c as i,e as c,w as n,i as m,ax as X,h as e,av as ae,k as I,t as S,g,I as _,ac as U,ad as E,_ as Ge,u as Xe,o as Ye,b as Ze,j as se,f as xe,aB as el,aH as ll,E as al,aI as nl,ao as Q,aa as tl,a7 as ul}from"./index-0188cf50.js";import{t as Fe,b as ol,c as sl,f as De,e as rl}from"./tree-73f11865.js";import{g as Re,w as dl,x as il,y as ml,z as Ae,A as pl,h as vl,B as Ee,C as cl}from"./content-f56c1924.js";import{b as Ne}from"./system-1d083a1c.js";import{a as fl,_ as bl,b as hl,c as yl}from"./QueryItem.vue_vue_type_script_setup_true_lang-0e6ad83a.js";import{_ as wl}from"./ListMove.vue_vue_type_script_setup_true_lang-a1b8cb75.js";import{q as Ke}from"./config-2ad67e7e.js";import{a as Le,m as Pe,g as Be}from"./data-fd71ac1a.js";import{_ as gl,T as Vl}from"./FieldItem.vue_vue_type_script_setup_true_lang-85beb5ea.js";import{_ as $l}from"./DialogForm.vue_vue_type_script_setup_true_lang-3a3f2920.js";import{a as kl}from"./FileListUpload.vue_vue_type_style_index_0_scoped_cd89d899_lang-659f3f29.js";/* empty css                                                                   */import"./BaseUpload-9c01c712.js";const ql={name:"ChannelForm"},Cl=ze({...ql,props:{modelValue:{type:Boolean,required:!0},beanId:{type:Number,default:null},beanIds:{type:Array,required:!0},parent:{type:Object,default:null}},emits:{"update:modelValue":null,finished:null},setup(J,{emit:ne}){const N=J,{modelValue:D,parent:V}=We(N),C=f(),o=f({}),j=f([]),z=f([]),k=f([]),O=f([]),K=f([]),F=f([]),H=f([]),T=f(),R=W(()=>k.value.find(l=>l.id===T.value)),t=W(()=>{var l;return Le(Pe(Be().channel.mains,(l=R.value)==null?void 0:l.mains,"channel"))}),A=W(()=>{var l;return Le(Pe(Be().channel.asides,(l=R.value)==null?void 0:l.asides,"channel"))}),Y=W(()=>{var l;return JSON.parse(((l=R.value)==null?void 0:l.customs)||"[]")}),te=W(()=>{const l=ol(z.value,o.value.id);return X.allChannelPermission?l:sl(l,K.value)}),G=async()=>{z.value=Fe(await Re())},ue=async()=>{X.epRank>0&&(j.value=await Ne({category:"sys_article",latestVersion:!0}))},Z=async()=>{await G(),ne("finished")},x=async()=>{k.value=await Ke({type:"channel"}),T.value==null&&k.value.length>0&&(T.value=k.value[0].id)},ee=async()=>{O.value=await Ke({type:"article"})},oe=async()=>{F.value=await pl()},d=async()=>{H.value=await vl()},h=async()=>{K.value=await Ee()};Je(D,()=>{var l,u,q;D.value&&(T.value=(q=(l=V.value)==null?void 0:l.articleModelId)!=null?q:(u=k.value[0])==null?void 0:u.id,h(),x(),ee(),oe(),d(),G(),ue())});const $=l=>(Y.value.forEach(u=>{l[u.code]=u.defaultValue}),l);return(l,u)=>{const q=w("el-input"),v=w("el-form-item"),b=w("el-col"),p=w("el-checkbox"),M=w("el-option"),L=w("el-select"),le=w("el-switch"),re=w("el-row"),je=w("el-tree-select"),Oe=w("el-input-number"),He=w("el-tab-pane"),Qe=w("el-tabs");return i(),c($l,{values:o.value,"onUpdate:values":u[21]||(u[21]=r=>o.value=r),name:l.$t("menu.content.channel"),"query-bean":m(dl),"create-bean":m(il),"update-bean":m(ml),"delete-bean":m(Ae),"bean-id":J.beanId,"bean-ids":J.beanIds,focus:C.value,"init-values":r=>{var a,s,P,B,y,de,ie,me,pe,ve,ce,fe,be,he,ye,we,ge,Ve,$e,ke,qe,Ce,_e,Te,Me,Ue,Ie,Se;return{parentId:(s=r==null?void 0:r.parentId)!=null?s:(a=m(V))==null?void 0:a.id,type:1,channelModelId:(de=(B=r==null?void 0:r.channelModelId)!=null?B:(P=m(V))==null?void 0:P.channelModelId)!=null?de:(y=k.value[0])==null?void 0:y.id,articleModelId:(ve=(me=r==null?void 0:r.articleModelId)!=null?me:(ie=m(V))==null?void 0:ie.articleModelId)!=null?ve:(pe=O.value[0])==null?void 0:pe.id,nav:(be=(fe=r==null?void 0:r.nav)!=null?fe:(ce=m(V))==null?void 0:ce.nav)!=null?be:!0,channelTemplate:(we=(ye=r==null?void 0:r.channelTemplate)!=null?ye:(he=m(V))==null?void 0:he.channelTemplate)!=null?we:F.value[0],articleTemplate:($e=(Ve=r==null?void 0:r.articleTemplate)!=null?Ve:(ge=m(V))==null?void 0:ge.articleTemplate)!=null?$e:H.value[0],pageSize:20,allowComment:(Ce=(qe=r==null?void 0:r.allowComment)!=null?qe:(ke=m(V))==null?void 0:ke.allowComment)!=null?Ce:!0,allowContribute:(Me=(Te=r==null?void 0:r.allowContribute)!=null?Te:(_e=m(V))==null?void 0:_e.allowContribute)!=null?Me:!0,allowSearch:(Se=(Ie=r==null?void 0:r.allowSearch)!=null?Ie:(Ue=m(V))==null?void 0:Ue.allowSearch)!=null?Se:!0,customs:$({})}},"to-values":r=>({...r}),perms:"channel","model-value":J.modelValue,"disable-edit":r=>!m(X).allChannelPermission&&r.id!=null&&!K.value.includes(r.id),"label-width":"120px",large:"","onUpdate:modelValue":u[22]||(u[22]=r=>l.$emit("update:modelValue",r)),onFinished:Z,onBeanChange:u[23]||(u[23]=r=>{var a,s,P,B;T.value=(B=(s=r==null?void 0:r.channelModelId)!=null?s:(a=m(V))==null?void 0:a.channelModelId)!=null?B:(P=O.value[0])==null?void 0:P.id,G()})},{default:n(({isEdit:r})=>[e(re,null,{default:n(()=>[e(b,{span:18},{default:n(()=>[e(re,null,{default:n(()=>[e(b,{span:t.value.name.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"name",label:(a=t.value.name.name)!=null?a:l.$t("channel.name"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:n(()=>[e(q,{ref_key:"focus",ref:C,modelValue:o.value.name,"onUpdate:modelValue":u[0]||(u[0]=s=>o.value.name=s),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"]),e(b,{span:t.value.alias.double?12:24},{default:n(()=>[e(v,{prop:"alias",rules:[{required:!0,message:()=>l.$t("v.required")},{pattern:/^[\w-]*$/,message:()=>l.$t("channel.error.aliasPattern")}]},{label:n(()=>{var a;return[e(ae,{label:(a=t.value.alias.name)!=null?a:l.$t("channel.alias"),message:"channel.alias",help:""},null,8,["label"])]}),default:n(()=>[e(q,{modelValue:o.value.alias,"onUpdate:modelValue":u[1]||(u[1]=a=>o.value.alias=a),maxlength:"50"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["span"]),o.value.type===3?(i(),c(b,{key:0,span:t.value.linkUrl.double?12:24},{default:n(()=>[e(v,{prop:"linkUrl",rules:[{required:!0,message:()=>l.$t("v.required")},{pattern:/^(http|\/).*$/,message:()=>l.$t("channel.error.linkUrl")}]},{label:n(()=>{var a;return[e(ae,{label:(a=t.value.linkUrl.name)!=null?a:l.$t("channel.linkUrl"),message:"channel.linkUrl",help:""},null,8,["label"])]}),default:n(()=>[e(q,{modelValue:o.value.linkUrl,"onUpdate:modelValue":u[3]||(u[3]=a=>o.value.linkUrl=a),maxlength:"255"},{append:n(()=>[e(p,{modelValue:o.value.targetBlank,"onUpdate:modelValue":u[2]||(u[2]=a=>o.value.targetBlank=a)},{default:n(()=>[I(S(l.$t("channel.targetBlank")),1)]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["span"])):g("",!0),o.value.type<3?(i(),_(U,{key:1},[t.value.seoTitle.show?(i(),c(b,{key:0,span:t.value.seoTitle.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"seoTitle",label:(a=t.value.seoTitle.name)!=null?a:l.$t("channel.seoTitle"),rules:t.value.seoTitle.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(q,{modelValue:o.value.seoTitle,"onUpdate:modelValue":u[4]||(u[4]=s=>o.value.seoTitle=s),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0),t.value.seoKeywords.show?(i(),c(b,{key:1,span:t.value.seoKeywords.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"seoKeywords",label:(a=t.value.seoKeywords.name)!=null?a:l.$t("channel.seoKeywords"),rules:t.value.seoKeywords.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(q,{modelValue:o.value.seoKeywords,"onUpdate:modelValue":u[5]||(u[5]=s=>o.value.seoKeywords=s),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0),t.value.seoDescription.show?(i(),c(b,{key:2,span:t.value.seoDescription.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"seoDescription",label:(a=t.value.seoDescription.name)!=null?a:l.$t("channel.seoDescription"),rules:t.value.seoDescription.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(q,{modelValue:o.value.seoDescription,"onUpdate:modelValue":u[6]||(u[6]=s=>o.value.seoDescription=s),maxlength:"1000"},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0)],64)):g("",!0),t.value.image.show?(i(),c(b,{key:2,span:t.value.image.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"image",label:(a=t.value.image.name)!=null?a:l.$t("channel.image"),rules:t.value.image.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(m(kl),{modelValue:o.value.image,"onUpdate:modelValue":u[7]||(u[7]=s=>o.value.image=s),height:t.value.image.imageHeight,width:t.value.image.imageWidth,mode:t.value.image.imageMode},null,8,["modelValue","height","width","mode"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0),t.value.channelModel.show?(i(),c(b,{key:3,span:t.value.channelModel.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"channelModelId",label:(a=t.value.channelModel.name)!=null?a:l.$t("channel.channelModel"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:n(()=>[e(L,{modelValue:o.value.channelModelId,"onUpdate:modelValue":u[8]||(u[8]=s=>o.value.channelModelId=s),class:"w-full",onChange:s=>{T.value=s,r||l.$nextTick().then(()=>{$(o.value.customs)})}},{default:n(()=>[(i(!0),_(U,null,E(k.value,s=>(i(),c(M,{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onChange"])]),_:2},1032,["label","rules"])]}),_:2},1032,["span"])):g("",!0),t.value.articleModel.show?(i(),c(b,{key:4,span:t.value.articleModel.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"articleModelId",label:(a=t.value.articleModel.name)!=null?a:l.$t("channel.articleModel"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:n(()=>[e(L,{modelValue:o.value.articleModelId,"onUpdate:modelValue":u[9]||(u[9]=s=>o.value.articleModelId=s),class:"w-full"},{default:n(()=>[(i(!0),_(U,null,E(O.value,s=>(i(),c(M,{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0),[3,4,5].includes(o.value.type)?g("",!0):(i(),_(U,{key:5},[t.value.channelTemplate.show?(i(),c(b,{key:0,span:t.value.channelTemplate.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"channelTemplate",label:(a=t.value.channelTemplate.name)!=null?a:l.$t("channel.channelTemplate"),rules:t.value.channelTemplate.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(L,{modelValue:o.value.channelTemplate,"onUpdate:modelValue":u[10]||(u[10]=s=>o.value.channelTemplate=s),class:"w-full"},{default:n(()=>[(i(!0),_(U,null,E(F.value,s=>(i(),c(M,{key:s,label:s+".html",value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0),t.value.articleTemplate.show?(i(),c(b,{key:1,span:t.value.articleTemplate.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"articleTemplate",label:(a=t.value.articleTemplate.name)!=null?a:l.$t("channel.articleTemplate"),rules:t.value.articleTemplate.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(L,{modelValue:o.value.articleTemplate,"onUpdate:modelValue":u[11]||(u[11]=s=>o.value.articleTemplate=s),class:"w-full"},{default:n(()=>[(i(!0),_(U,null,E(H.value,s=>(i(),c(M,{key:s,label:s+".html",value:s},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0)],64)),t.value.allowComment.show?(i(),c(b,{key:6,span:t.value.allowComment.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"allowComment",label:(a=t.value.allowComment.name)!=null?a:l.$t("channel.allowComment"),rules:t.value.allowComment.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(le,{modelValue:o.value.allowComment,"onUpdate:modelValue":u[12]||(u[12]=s=>o.value.allowComment=s)},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0),t.value.allowContribute.show?(i(),c(b,{key:7,span:t.value.allowContribute.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"allowContribute",label:(a=t.value.allowContribute.name)!=null?a:l.$t("channel.allowContribute"),rules:t.value.allowContribute.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(le,{modelValue:o.value.allowContribute,"onUpdate:modelValue":u[13]||(u[13]=s=>o.value.allowContribute=s)},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0),t.value.nav.show?(i(),c(b,{key:8,span:t.value.nav.double?12:24},{default:n(()=>[e(v,{prop:"nav",rules:t.value.nav.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{label:n(()=>{var a;return[e(ae,{label:(a=t.value.nav.name)!=null?a:l.$t("channel.nav"),message:"channel.nav",help:""},null,8,["label"])]}),default:n(()=>[e(le,{modelValue:o.value.nav,"onUpdate:modelValue":u[14]||(u[14]=a=>o.value.nav=a)},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["span"])):g("",!0),t.value.allowSearch.show?(i(),c(b,{key:9,span:t.value.allowSearch.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"allowSearch",label:(a=t.value.allowSearch.name)!=null?a:l.$t("channel.allowSearch"),rules:t.value.allowSearch.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(le,{modelValue:o.value.allowSearch,"onUpdate:modelValue":u[15]||(u[15]=s=>o.value.allowSearch=s)},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0),(i(!0),_(U,null,E(Y.value,a=>(i(),c(b,{key:a.code,span:a.double?12:24},{default:n(()=>[e(v,{prop:`customs.${a.code}`,rules:a.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{label:n(()=>[e(ae,{label:a.name},null,8,["label"])]),default:n(()=>[e(gl,{modelValue:o.value.customs[a.code],"onUpdate:modelValue":s=>o.value.customs[a.code]=s,"model-key":o.value.customs[a.code+"_key"],"onUpdate:modelKey":s=>o.value.customs[a.code+"_key"]=s,field:a},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])]),_:2},1032,["prop","rules"])]),_:2},1032,["span"]))),128)),o.value.type===2?(i(),c(b,{key:10,span:t.value.text.double?12:24},{default:n(()=>{var a;return[e(v,{prop:"text",label:(a=t.value.text.name)!=null?a:l.$t("channel.text"),rules:t.value.text.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(m(Vl),{modelValue:o.value.text,"onUpdate:modelValue":u[16]||(u[16]=s=>o.value.text=s)},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["span"])):g("",!0)]),_:2},1024)]),_:2},1024),e(b,{span:6,class:"el-form--label-top label-top"},{default:n(()=>[e(Qe,{type:"border-card",class:"ml-5"},{default:n(()=>[e(He,{label:l.$t("channel.tabs.setting")},{default:n(()=>{var a,s,P,B;return[e(v,{prop:"parentId",label:(a=A.value.parent.name)!=null?a:l.$t("channel.parent")},{default:n(()=>[e(je,{modelValue:o.value.parentId,"onUpdate:modelValue":u[17]||(u[17]=y=>o.value.parentId=y),data:te.value,"node-key":"id",props:{label:"name",disabled:"disabled"},"render-after-expand":!1,"check-strictly":"",clearable:"",class:"w-full"},null,8,["modelValue","data"])]),_:1},8,["label"]),e(v,{prop:"type",label:(s=A.value.type.name)!=null?s:l.$t("channel.type"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:n(()=>[e(L,{modelValue:o.value.type,"onUpdate:modelValue":u[18]||(u[18]=y=>o.value.type=y),class:"w-full"},{default:n(()=>[(i(),_(U,null,E([1,2,3,4,5],y=>e(M,{key:y,label:l.$t(`channel.type.${y}`),value:y},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),e(v,{prop:"processKey",label:(P=A.value.processKey.name)!=null?P:l.$t("channel.processKey"),rules:A.value.processKey.required?{required:!0,message:()=>l.$t("v.required")}:void 0},{default:n(()=>[e(L,{modelValue:o.value.processKey,"onUpdate:modelValue":u[19]||(u[19]=y=>o.value.processKey=y),clearable:"",class:"w-full"},{default:n(()=>[(i(!0),_(U,null,E(j.value,y=>(i(),c(M,{key:y.key,label:y.name,value:y.key},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label","rules"]),e(v,{prop:"pageSize",label:(B=A.value.pageSize.name)!=null?B:l.$t("channel.pageSize"),rules:{required:!0,message:()=>l.$t("v.required")}},{default:n(()=>[e(Oe,{modelValue:o.value.pageSize,"onUpdate:modelValue":u[20]||(u[20]=y=>o.value.pageSize=y),min:1,max:200},null,8,["modelValue"])]),_:1},8,["label","rules"])]}),_:1},8,["label"])]),_:1})]),_:1})]),_:2},1024)]),_:1},8,["values","name","query-bean","create-bean","update-bean","delete-bean","bean-id","bean-ids","focus","init-values","to-values","model-value","disable-edit"])}}});const _l=Ge(Cl,[["__scopeId","data-v-07cbd636"]]),Tl={class:"mb-3"},Ml={class:"app-block mt-3"},Ul={name:"ChannelList"},jl=ze({...Ul,setup(J){const{t:ne}=Xe(),N=f({}),D=f(),V=f(),C=f([]),o=f([]),j=f(!1),z=f(!1),k=f(),O=W(()=>De(C.value).map(d=>d.id)),K=f(!1),F=f(),H=f([]),T=f([]),R=d=>X.allChannelPermission||H.value.includes(d.id),t=async()=>{j.value=!0;try{C.value=await Re({...el(N.value),Q_OrderBy:D.value}),K.value=Object.values(N.value).filter(d=>d!==void 0&&d!=="").length>0||D.value!==void 0,K.value||(C.value=Fe(C.value))}finally{j.value=!1}},A=async()=>{X.epRank>0&&(T.value=await Ne({category:"sys_article",latestVersion:!0}))},Y=async()=>{H.value=await Ee()};Ye(()=>{t(),A(),Y()});const te=({column:d,prop:h,order:$})=>{var l;h?D.value=((l=d.sortBy)!=null?l:h)+($==="descending"?"_desc":""):D.value=void 0,t()},G=()=>t(),ue=()=>{V.value.clearSort(),ll(N.value),D.value=void 0,t()},Z=d=>{k.value=void 0,F.value=d,z.value=!0},x=d=>{k.value=d,F.value=null,z.value=!0},ee=async d=>{await Ae(d),t(),al.success(ne("success"))},oe=async(d,h)=>{const $=nl(d,De(C.value),h);await cl($),await t(),d.forEach(l=>{V.value.toggleRowSelection(rl(C.value,u=>u.id===l.id))})};return(d,h)=>{const $=w("el-button"),l=w("el-popconfirm"),u=w("el-table-column"),q=w("el-tag"),v=w("el-table"),b=Ze("loading");return i(),_("div",null,[se("div",Tl,[e(m(bl),{params:N.value,onSearch:G,onReset:ue},{default:n(()=>[e(m(fl),{label:d.$t("channel.name"),name:"Q_Contains_name"},null,8,["label"])]),_:1},8,["params"])]),se("div",null,[e($,{type:"primary",disabled:m(Q)("channel:create"),icon:m(tl),onClick:h[0]||(h[0]=()=>Z(void 0))},{default:n(()=>[I(S(d.$t("add")),1)]),_:1},8,["disabled","icon"]),e(l,{title:d.$t("confirmDelete"),onConfirm:h[1]||(h[1]=()=>ee(o.value.map(p=>p.id)))},{reference:n(()=>[e($,{disabled:o.value.length<=0||m(Q)("channel:delete"),icon:m(ul)},{default:n(()=>[I(S(d.$t("delete")),1)]),_:1},8,["disabled","icon"])]),_:1},8,["title"]),e(wl,{disabled:o.value.length<=0||K.value||m(Q)("channel:update"),class:"ml-2",onMove:h[2]||(h[2]=p=>oe(o.value,p))},null,8,["disabled"]),e(m(hl),{name:"channel",class:"ml-2"})]),se("div",Ml,[xe((i(),c(v,{ref_key:"table",ref:V,"row-key":"id","default-expand-all":"",data:C.value,onSelectionChange:h[3]||(h[3]=p=>o.value=p),onRowDblclick:h[4]||(h[4]=p=>x(p.id)),onSortChange:te},{default:n(()=>[e(m(yl),{name:"channel"},{default:n(()=>[e(u,{type:"selection",selectable:R,width:"45"}),e(u,{property:"name",label:d.$t("channel.name"),sortable:"custom","show-overflow-tooltip":""},{default:n(({row:p})=>[I(S(K.value?p.names.join(" / "):p.name),1)]),_:1},8,["label"]),e(u,{property:"alias",label:d.$t("channel.alias"),sortable:"custom","show-overflow-tooltip":""},null,8,["label"]),e(u,{property:"channelModel.name",label:d.$t("channel.channelModel"),display:"none",sortable:"custom","show-overflow-tooltip":""},null,8,["label"]),e(u,{property:"articleModel.name",label:d.$t("channel.articleModel"),sortable:"custom","show-overflow-tooltip":""},null,8,["label"]),e(u,{property:"processKey",label:d.$t("channel.processKey"),sortable:"custom","show-overflow-tooltip":""},{default:n(({row:p})=>{var M;return[I(S((M=T.value.find(L=>L.key===p.processKey))==null?void 0:M.name),1)]}),_:1},8,["label"]),e(u,{property:"nav",label:d.$t("channel.nav")},{default:n(({row:p})=>[e(q,{type:p.nav?"success":"info",size:"small"},{default:n(()=>[I(S(d.$t(p.nav?"yes":"no")),1)]),_:2},1032,["type"])]),_:1},8,["label"]),e(u,{property:"id",label:"ID",width:"64",sortable:"custom"}),e(u,{label:d.$t("table.action")},{default:n(({row:p})=>[e($,{type:"primary",disabled:m(Q)("channel:create")||!R(p),size:"small",link:"",onClick:()=>Z(p)},{default:n(()=>[I(S(d.$t("addChild")),1)]),_:2},1032,["disabled","onClick"]),e($,{type:"primary",disabled:m(Q)("channel:update"),size:"small",link:"",onClick:()=>x(p.id)},{default:n(()=>[I(S(d.$t("edit")),1)]),_:2},1032,["disabled","onClick"]),e(l,{title:d.$t("confirmDelete"),onConfirm:()=>ee([p.id])},{reference:n(()=>[e($,{type:"primary",disabled:m(Q)("channel:delete")||!R(p),size:"small",link:""},{default:n(()=>[I(S(d.$t("delete")),1)]),_:2},1032,["disabled"])]),_:2},1032,["title","onConfirm"])]),_:1},8,["label"])]),_:1})]),_:1},8,["data"])),[[b,j.value]])]),e(_l,{modelValue:z.value,"onUpdate:modelValue":h[5]||(h[5]=p=>z.value=p),"bean-id":k.value,"bean-ids":O.value,parent:F.value,onFinished:t},null,8,["modelValue","bean-id","bean-ids","parent"])])}}});export{jl as default};
