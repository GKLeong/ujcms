var x=Object.defineProperty,H=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var F=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var L=(e,n,t)=>n in e?x(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,E=(e,n)=>{for(var t in n||(n={}))X.call(n,t)&&L(e,t,n[t]);if(F)for(var t of F(n))Y.call(n,t)&&L(e,t,n[t]);return e},J=(e,n)=>H(e,W(n));import{r as M,az as z,g as I,t as U,R as Z,j as c,o as f,k as S,w as g,l as v,P as N,A as O,q as C,C as j,m as s,F as R,y as Q,aO as P,u as ee,i as A,aP as te,aQ as le,I as B,aR as ne,K as ae,aS as oe,aq as se,aT as ue,aU as re,aV as de}from"./vendor.7e46e91a.js";const D="ujcms_column_settings";function ie(){const e=localStorage.getItem(D);return e?JSON.parse(e):{}}const q=M({}),$=M(ie());function pe(){localStorage.setItem(D,JSON.stringify($))}const ce=e=>(q[e]||(q[e]=[]),z(q,e)),G=(e,n)=>{for(let t=0,u=e.length;t<u;)n.findIndex(m=>m.title===e[t].title)===-1?(e.splice(t,1),u-=1):t+=1;return n.forEach(t=>{e.findIndex(u=>u.title===t.title)===-1&&e.push(E({},t))}),e},me=(e,n)=>{q[e]=n,$[e]||($[e]=[]);const t=$[e];G(t,n)},K=e=>($[e]||($[e]=[]),z($,e)),Ve=I({name:"ColumnSetting",props:{name:{type:String,required:!0}},setup(e){const n=e,{name:t}=U(n),u=K(t.value),m=ce(t.value);Z(u,()=>pe(),{deep:!0});const i=()=>{u.value=G([],m.value)};return(b,d)=>{const _=c("el-icon"),r=c("el-tooltip"),V=c("el-button"),l=c("el-dropdown-item"),o=c("el-checkbox"),p=c("el-dropdown-menu"),k=c("el-dropdown");return f(),S(k,{class:"align-middle",trigger:"click","hide-on-click":!1},{dropdown:g(()=>[v(p,null,{default:g(()=>[v(l,null,{default:g(()=>[v(V,{type:"primary",onClick:i,link:""},{default:g(()=>[N(O(b.$t("table.columnsReset")),1)]),_:1})]),_:1}),(f(!0),C(R,null,j(s(u),(a,T)=>(f(),S(l,{key:a.title,divided:T===0},{default:g(()=>[v(o,{modelValue:a.display,"onUpdate:modelValue":w=>a.display=w},{default:g(()=>[N(O(a.title),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["divided"]))),128))]),_:1})]),default:g(()=>[Q("span",null,[v(r,{content:b.$t("table.columnsSetting"),placement:"top"},{default:g(()=>[v(_,{class:"text-base"},{default:g(()=>[v(s(P))]),_:1})]),_:1},8,["content"])])]),_:1})}}}),ke=I({name:"ColumnList",props:{name:{type:String,required:!0}},setup(e,{slots:n}){var r,V;const{name:t}=U(e),{t:u}=ee(),m=(V=(r=n.default)==null?void 0:r.call(n))!=null?V:[],i=l=>(l==null?void 0:l.type)==="selection"?u("table.selection"):l==null?void 0:l.label,b=m.map(l=>{var o;return{title:i(l.props),display:((o=l.props)==null?void 0:o.display)!=="none"}});me(t.value,b);const d=K(t.value);return{columns:A(()=>m.filter(l=>{const o=d.value.find(p=>i(l.props)===p.title);return!o||o.display}).map(l=>J(E({},l),{key:i(l.props)})).sort((l,o)=>{let p=d.value.findIndex(a=>a.title===i(l));p<0&&(p=m.findIndex(a=>i(a)===i(l)));let k=d.value.findIndex(a=>a.title===i(o));return k<0&&(k=m.findIndex(a=>i(a)===i(o))),p-k}))}},render(){return this.columns}}),fe=I({name:"QueryInput",props:{inputs:{type:Array,required:!0},name:{type:String,required:!0}},setup(e){const{inputs:n,name:t}=U(e);return()=>n.value.find(u=>u.props.name===t.value)}}),ve={class:"flex"},_e={class:"space-y-1"},Se=I({name:"QueryForm",props:{params:{type:Object,required:!0}},emits:{search:null,reset:null},setup(e){const n=e,{params:t}=U(n),u=te();le("params",t);const m=B([]),i=A(()=>{var l,o;return(o=(l=u.default)==null?void 0:l.call(u))!=null?o:[]});m.value=i.value.map(l=>{var o,p;return{label:(o=l.props)==null?void 0:o.label,name:(p=l.props)==null?void 0:p.name}});const[b]=m.value,d=B([b.name]),_=A(()=>m.value.filter(l=>!d.value.includes(l.name))),r=()=>{Object.keys(t.value).forEach(l=>{!d.value.includes(l)&&d.value.findIndex(o=>o.split(",").includes(l))===-1&&delete t.value[l]})},V=l=>{if(l===0){const[o]=_.value;d.value[d.value.length]=o.name}else d.value.splice(l,1),r()};return(l,o)=>{const p=c("el-button"),k=c("el-option"),a=c("el-select"),T=c("el-button-group");return f(),C("form",ve,[Q("div",_e,[(f(!0),C(R,null,j(d.value,(w,h)=>(f(),C("div",{key:w,class:"flex"},[v(p,{icon:h==0?s(se):s(ue),onClick:y=>V(h),disabled:h<=0&&s(_).length<=0,circle:""},null,8,["icon","onClick","disabled"]),v(a,{modelValue:d.value[h],"onUpdate:modelValue":y=>d.value[h]=y,onChange:o[0]||(o[0]=y=>r()),class:"w-36"},{default:g(()=>[(f(!0),C(R,null,j(m.value.filter(y=>y.name===d.value[h]||s(_).includes(y)),y=>(f(),S(k,{key:y.name,label:y.label,value:y.name},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),v(fe,{inputs:s(i),name:d.value[h]},null,8,["inputs","name"])]))),128))]),Q("div",null,[v(T,{class:"ml-2"},{default:g(()=>[v(p,{"native-type":"submit",icon:s(ne),onClick:o[1]||(o[1]=ae(w=>l.$emit("search"),["prevent"]))},{default:g(()=>[N(O(l.$t("search")),1)]),_:1},8,["icon"]),v(p,{icon:s(oe),onClick:o[2]||(o[2]=w=>l.$emit("reset"))},{default:g(()=>[N(O(l.$t("reset")),1)]),_:1},8,["icon"])]),_:1})])])}}}),ge={key:0,class:"inline-block"},he=I({name:"QueryItem",props:{label:{type:String,required:!0},name:{type:String,required:!0},type:{type:String},options:{type:Object}},setup(e){const n=e,t=re("params"),{name:u}=U(n),[m,i]=u.value.split(","),b=B(m),d=B(i);return(_,r)=>{const V=c("el-input-number"),l=c("el-date-picker"),o=c("el-option"),p=c("el-select"),k=c("el-input");return de(_.$slots,"default",{},()=>[e.type==="number"?(f(),C("div",ge,[v(V,{modelValue:s(t)[b.value],"onUpdate:modelValue":r[0]||(r[0]=a=>s(t)[b.value]=a),placeholder:_.$t("begin.number"),class:"w-48"},null,8,["modelValue","placeholder"]),v(V,{modelValue:s(t)[d.value],"onUpdate:modelValue":r[1]||(r[1]=a=>s(t)[d.value]=a),placeholder:_.$t("end.number"),class:"w-48"},null,8,["modelValue","placeholder"])])):e.type==="date"?(f(),S(l,{key:1,modelValue:s(t)[s(u)],"onUpdate:modelValue":r[2]||(r[2]=a=>s(t)[s(u)]=a),type:"daterange","start-placeholder":_.$t("begin.date"),"end-placeholder":_.$t("end.date"),class:"w-96"},null,8,["modelValue","start-placeholder","end-placeholder"])):e.type==="datetime"?(f(),S(l,{key:2,modelValue:s(t)[s(u)],"onUpdate:modelValue":r[3]||(r[3]=a=>s(t)[s(u)]=a),type:"datetimerange","start-placeholder":_.$t("begin.date"),"end-placeholder":_.$t("end.date"),class:"w-96"},null,8,["modelValue","start-placeholder","end-placeholder"])):e.options?(f(),S(p,{key:3,modelValue:s(t)[s(u)],"onUpdate:modelValue":r[4]||(r[4]=a=>s(t)[s(u)]=a),multiple:"",class:"w-96"},{default:g(()=>[(f(!0),C(R,null,j(e.options,a=>(f(),S(o,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(f(),S(k,{key:4,modelValue:s(t)[s(u)],"onUpdate:modelValue":r[5]||(r[5]=a=>s(t)[s(u)]=a),class:"w-96"},null,8,["modelValue"]))])}}});export{he as _,Se as a,Ve as b,ke as c};
