System.register(["./index-legacy-b678d1bc.js","./tree-legacy-035e50cc.js","./config-legacy-77ee9975.js","./user-legacy-4c758002.js","./FileListUpload.vue_vue_type_style_index_0_scoped_cd89d899_lang-legacy-76e22723.js","./vuedraggable.umd-legacy-c1b29ae0.js","./BaseUpload.vue_vue_type_style_index_0_scoped_2414138e_lang-legacy-17d63879.js","./FieldItem.vue_vue_type_script_setup_true_lang-legacy-616fad8c.js","./content-legacy-7fd52c3a.js","./Tinymce-legacy-70b4f0f9.js","./BaseUpload-legacy-862342c9.js"],(function(e,l){"use strict";var a,u,t,s,d,o,r,i,n,m,p,v,g,c,b,f,_,V,y,h,w,k,q,$,U,x,B,S,j,D,T,I,C,K,P,W,z,E;return{setters:[e=>{a=e.d,u=e.u,t=e.r,s=e.a1,d=e.aZ,o=e.o,r=e.a,i=e.b,n=e.c,m=e.e,p=e.w,v=e.h,g=e.I,c=e.ad,b=e.ac,f=e.f,_=e.ao,V=e.i,y=e.j,h=e.k,w=e.t,k=e.ah,q=e.l,$=e.R,U=e.S,x=e.E,B=e._},e=>{S=e.t},e=>{j=e.A,D=e.q,T=e.B,I=e.C,C=e.D,K=e.E,P=e.F},e=>{W=e.q},e=>{z=e.a},null,null,e=>{E=e._},null,null,null],execute:function(){var l=document.createElement("style");l.textContent=".el-tabs[data-v-d2b3edc0] .el-tabs__header{float:right;margin-right:1px}.watermark-position[data-v-d2b3edc0]{display:flex;height:9rem;width:9rem;flex-wrap:wrap;border-radius:.25rem;border-width:1px;border-style:dashed;--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.watermark-position[data-v-d2b3edc0] .el-radio__label{padding-left:0}.watermark-position[data-v-d2b3edc0] .el-radio{margin-right:0;display:flex;height:33.333333%;width:33.333333%;align-items:center;justify-content:center}\n",document.head.appendChild(l);const F={class:"watermark-position"},H=(e=>($("data-v-d2b3edc0"),e=e(),U(),e))((()=>y("span",null,null,-1)));e("default",B(a({name:"SiteSettings",emits:{"update:modelValue":null,finished:null},setup(e){const{t:l}=u(),a=t(),$=t(),U=t({}),B=t(!1),R=t(!1),N=t([]),M=t([]),J=t([]),L=t(),A=s((()=>J.value.find((e=>e.id===L.value)))),O=s((()=>JSON.parse(A.value?.customs||"[]"))),Z=[];d("siteSettings:base:update")&&Z.push("base"),d("siteSettings:watermark:update")&&Z.push("watermark"),d("siteSettings:messageBoard:update")&&Z.push("messageBoard"),d("siteSettings:customs:update")&&Z.push("customs");const G=t(Z[0]),Q=e=>{U.value="watermark"===e?$.value.watermark:"messageBoard"===e?$.value.messageBoard:"customs"===e?$.value.customs:$.value},X=async()=>{M.value=await j()},Y=async()=>{N.value=S(await W())},ee=async()=>{J.value=await D({type:"site"})},le=async()=>{$.value=await T(),L.value=$.value.modelId,Q(G.value)};o((async()=>{B.value=!0;try{await Promise.all([X(),Y(),ee(),le()])}finally{B.value=!1}}));const ae=()=>{a.value.validate((async e=>{if(e){R.value=!0;try{"watermark"===G.value?await I(U.value):"messageBoard"===G.value?await C(U.value):"customs"===G.value?await K(U.value):await P(U.value),x.success(l("success"))}finally{R.value=!1}(async()=>{B.value=!0;try{await le()}finally{B.value=!1}})()}}))};return(e,l)=>{const u=r("el-tab-pane"),t=r("el-tabs"),s=r("el-aside"),d=r("el-switch"),o=r("el-form-item"),$=r("el-col"),x=r("el-radio"),S=r("el-radio-group"),j=r("el-slider"),D=r("el-input"),T=r("el-row"),I=r("el-option"),C=r("el-select"),K=r("el-input-number"),P=r("el-button"),W=r("el-form"),N=r("el-main"),L=r("el-container"),A=i("loading");return n(),m(L,null,{default:p((()=>[v(s,{width:"180px",class:"pr-3"},{default:p((()=>[v(t,{modelValue:G.value,"onUpdate:modelValue":l[0]||(l[0]=e=>G.value=e),"tab-position":"left",stretch:"",class:"bg-white",onTabClick:l[1]||(l[1]=({paneName:e})=>Q(e))},{default:p((()=>[(n(),g(b,null,c(Z,(l=>v(u,{key:l,name:l,label:e.$t(`site.settings.${l}`)},null,8,["name","label"]))),64))])),_:1},8,["modelValue"])])),_:1}),v(N,{class:"p-3 app-block"},{default:p((()=>[f((n(),m(W,{ref_key:"form",ref:a,model:U.value,"label-width":"150px"},{default:p((()=>["watermark"===G.value?(n(),m(T,{key:0},{default:p((()=>[v($,{span:24},{default:p((()=>[v(o,{prop:"enabled",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.watermark.enabled",help:""})])),default:p((()=>[v(d,{modelValue:U.value.enabled,"onUpdate:modelValue":l[2]||(l[2]=e=>U.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"overlay",label:e.$t("site.watermark.overlay"),rules:U.value.enabled?{required:!0,message:()=>e.$t("v.required")}:{}},{default:p((()=>[v(V(z),{modelValue:U.value.overlay,"onUpdate:modelValue":l[3]||(l[3]=e=>U.value.overlay=e)},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"position",label:e.$t("site.watermark.position"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:p((()=>[v(S,{modelValue:U.value.position,"onUpdate:modelValue":l[4]||(l[4]=e=>U.value.position=e)},{default:p((()=>[y("div",F,[(n(),g(b,null,c(9,(l=>v(x,{key:l,label:l,title:e.$t(`site.watermark.position.${l}`)},{default:p((()=>[H])),_:2},1032,["label","title"]))),64))])])),_:1},8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),v($,{span:24},{default:p((()=>[v(o,{prop:"dissolve",label:e.$t("site.watermark.dissolve"),rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.watermark.dissolve",help:""})])),default:p((()=>[v(j,{modelValue:U.value.dissolve,"onUpdate:modelValue":l[5]||(l[5]=e=>U.value.dissolve=e),min:0,max:100,"show-input":""},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"minWidth",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.watermark.minWidth",help:""})])),default:p((()=>[v(D,{modelValue:U.value.minWidth,"onUpdate:modelValue":l[6]||(l[6]=e=>U.value.minWidth=e),modelModifiers:{number:!0},min:1,max:65535},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"minHeight",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.watermark.minHeight",help:""})])),default:p((()=>[v(D,{modelValue:U.value.minHeight,"onUpdate:modelValue":l[7]||(l[7]=e=>U.value.minHeight=e),modelModifiers:{number:!0},min:1,max:65535},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})):"messageBoard"===G.value?(n(),m(T,{key:1},{default:p((()=>[v($,{span:12},{default:p((()=>[v(o,{prop:"enabled",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.messageBoard.enabled"})])),default:p((()=>[v(d,{modelValue:U.value.enabled,"onUpdate:modelValue":l[8]||(l[8]=e=>U.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"loginRequired",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.messageBoard.loginRequired"})])),default:p((()=>[v(d,{modelValue:U.value.loginRequired,"onUpdate:modelValue":l[9]||(l[9]=e=>U.value.loginRequired=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})):"customs"===G.value?(n(),m(T,{key:2},{default:p((()=>[(n(!0),g(b,null,c(O.value,(l=>(n(),m($,{key:l.code,span:l.double?12:24},{default:p((()=>[v(o,{prop:l.code,rules:l.required?{required:!0,message:()=>e.$t("v.required")}:void 0},{label:p((()=>[v(_,{label:l.name},null,8,["label"])])),default:p((()=>[v(E,{modelValue:U.value[l.code],"onUpdate:modelValue":e=>U.value[l.code]=e,"model-key":U.value[l.code+"_key"],"onUpdate:modelKey":e=>U.value[l.code+"_key"]=e,field:l},null,8,["modelValue","onUpdate:modelValue","model-key","onUpdate:modelKey","field"])])),_:2},1032,["prop","rules"])])),_:2},1032,["span"])))),128))])),_:1})):(n(),m(T,{key:3},{default:p((()=>[v($,{span:12},{default:p((()=>[v(o,{prop:"name",label:e.$t("site.name"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:p((()=>[v(D,{ref:"focus",modelValue:U.value.name,"onUpdate:modelValue":l[10]||(l[10]=e=>U.value.name=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"protocol",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.protocol",help:""})])),default:p((()=>[v(C,{modelValue:U.value.protocol,"onUpdate:modelValue":l[11]||(l[11]=e=>U.value.protocol=e),class:"w-full"},{default:p((()=>[(n(),g(b,null,c(["http","https"],(e=>v(I,{key:e,label:e,value:e},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"domain",rules:[{required:!0,message:()=>e.$t("v.required")},{pattern:/^[a-z0-9-.]*$/,message:()=>e.$t("site.error.domainPattern")},{pattern:/^(?!(uploads|templates|WEB-INF|cp)$).*/i,message:()=>e.$t("site.error.excludesPattern")}]},{label:p((()=>[v(_,{message:"site.domain",help:""})])),default:p((()=>[v(D,{modelValue:U.value.domain,"onUpdate:modelValue":l[12]||(l[12]=e=>U.value.domain=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"subDir",rules:[{pattern:/^[\w-]*$/,message:()=>e.$t("site.error.subDirPattern")},{pattern:/^(?!(uploads|templates|WEB-INF|cp)$).*/i,message:()=>e.$t("site.error.excludesPattern")}]},{label:p((()=>[v(_,{message:"site.subDir",help:""})])),default:p((()=>[v(D,{modelValue:U.value.subDir,"onUpdate:modelValue":l[13]||(l[13]=e=>U.value.subDir=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"theme",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.theme",help:""})])),default:p((()=>[v(C,{modelValue:U.value.theme,"onUpdate:modelValue":l[14]||(l[14]=e=>U.value.theme=e),class:"w-full"},{default:p((()=>[(n(!0),g(b,null,c(M.value,(e=>(n(),m(I,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"mobileTheme",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.mobileTheme",help:""})])),default:p((()=>[v(C,{modelValue:U.value.mobileTheme,"onUpdate:modelValue":l[15]||(l[15]=e=>U.value.mobileTheme=e),class:"w-full"},{default:p((()=>[(n(!0),g(b,null,c(M.value,(e=>(n(),m(I,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"modelId",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.model",help:""})])),default:p((()=>[v(C,{modelValue:U.value.modelId,"onUpdate:modelValue":l[16]||(l[16]=e=>U.value.modelId=e),class:"w-full"},{default:p((()=>[(n(!0),g(b,null,c(J.value,(e=>(n(),m(I,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v($,{span:24},{default:p((()=>[v(o,{prop:"logo"},{label:p((()=>[v(_,{message:"site.logo",help:""})])),default:p((()=>[v(V(z),{modelValue:U.value.logo,"onUpdate:modelValue":l[17]||(l[17]=e=>U.value.logo=e)},null,8,["modelValue"])])),_:1})])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"seoTitle"},{label:p((()=>[v(_,{message:"site.seoTitle",help:""})])),default:p((()=>[v(D,{modelValue:U.value.seoTitle,"onUpdate:modelValue":l[18]||(l[18]=e=>U.value.seoTitle=e),maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"seoKeywords"},{label:p((()=>[v(_,{message:"site.seoKeywords",help:""})])),default:p((()=>[v(D,{modelValue:U.value.seoKeywords,"onUpdate:modelValue":l[19]||(l[19]=e=>U.value.seoKeywords=e),maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1}),v($,{span:24},{default:p((()=>[v(o,{prop:"seoDescription"},{label:p((()=>[v(_,{message:"site.seoDescription",help:""})])),default:p((()=>[v(D,{modelValue:U.value.seoDescription,"onUpdate:modelValue":l[20]||(l[20]=e=>U.value.seoDescription=e),type:"textarea",rows:3,maxlength:"1000"},null,8,["modelValue"])])),_:1})])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"pageSize",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(_,{message:"site.pageSize",help:""})])),default:p((()=>[v(K,{modelValue:U.value.pageSize,"onUpdate:modelValue":l[21]||(l[21]=e=>U.value.pageSize=e),min:1,max:200},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v($,{span:12},{default:p((()=>[v(o,{prop:"status"},{label:p((()=>[v(_,{message:"site.status",help:""})])),default:p((()=>[v(S,{modelValue:U.value.status,"onUpdate:modelValue":l[22]||(l[22]=e=>U.value.status=e)},{default:p((()=>[(n(),g(b,null,c([0,1],(l=>v(x,{key:l,label:l},{default:p((()=>[h(w(e.$t(`site.status.${l}`)),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})),y("div",null,[v(P,{disabled:V(k)(`siteSettings:${G.value}:update`),loading:R.value,type:"primary","native-type":"submit",onClick:q(ae,["prevent"])},{default:p((()=>[h(w(e.$t("save")),1)])),_:1},8,["disabled","loading","onClick"])])])),_:1},8,["model"])),[[A,B.value]])])),_:1})])),_:1})}}}),[["__scopeId","data-v-d2b3edc0"]]))}}}));
