System.register(["./index-legacy-788fa28c.js","./tree-legacy-2fd3b3b5.js","./config-legacy-33f5cb5f.js","./user-legacy-b3313138.js","./LabelTip.vue_vue_type_script_setup_true_lang-legacy-5b0fbae8.js","./BaseUpload.vue_vue_type_style_index_0_scoped_5165bd65_lang-legacy-f2554bb9.js","./FieldItem.vue_vue_type_script_setup_true_lang-legacy-5ad4edb6.js","./content-legacy-d410d622.js","./BaseUpload-legacy-1ed2d197.js"],(function(e,l){"use strict";var a,u,t,s,d,o,r,i,n,m,p,v,g,c,b,f,_,V,y,h,w,k,q,$,U,x,S,B,j,I,T,D,W,z,C,H,K,P,R=document.createElement("style");return R.textContent=".el-tabs[data-v-7cc76eb1] .el-tabs__header{float:right;margin-right:1px}.watermark-position[data-v-7cc76eb1]{display:flex;height:9rem;width:9rem;flex-wrap:wrap;border-radius:.25rem;border-width:1px;border-style:dashed;--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity))}.watermark-position[data-v-7cc76eb1] .el-radio__label{padding-left:0}.watermark-position[data-v-7cc76eb1] .el-radio{margin-right:0;display:flex;height:33.333333%;width:33.333333%;align-items:center;justify-content:center}\n",document.head.appendChild(R),{setters:[e=>{a=e.d,u=e.u,t=e.r,s=e.X,d=e.cy,o=e.o,r=e.a,i=e.b,n=e.c,m=e.e,p=e.w,v=e.h,g=e.I,c=e.a8,b=e.a7,f=e.f,_=e.i,V=e.j,y=e.as,h=e.l,w=e.k,k=e.t,q=e.E,$=e.R,U=e.S,x=e._},e=>{S=e.t},e=>{B=e.H,j=e.q,I=e.I,T=e.J,D=e.K,W=e.L,z=e.M},e=>{C=e.q},e=>{H=e._},e=>{K=e.a},e=>{P=e._},null,null],execute:function(){const l={class:"watermark-position"},R=(e=>($("data-v-7cc76eb1"),e=e(),U(),e))((()=>V("span",null,null,-1)));e("default",x(a({name:"SiteSettings",emits:{"update:modelValue":null,finished:null},setup(e){const{t:a}=u(),$=t(),U=t(),x=t({}),E=t(!1),N=t(!1),F=t([]),M=t([]),J=t([]),L=t(),O=s((()=>J.value.find((e=>e.id===L.value)))),X=s((()=>JSON.parse(O.value?.customs||"[]"))),A=[];d("siteSettings:base:update")&&A.push("base"),d("siteSettings:watermark:update")&&A.push("watermark"),d("siteSettings:messageBoard:update")&&A.push("messageBoard"),d("siteSettings:customs:update")&&A.push("customs");const G=t(A[0]),Q=e=>{x.value="watermark"===e?U.value.watermark:"messageBoard"===e?U.value.messageBoard:"customs"===e?U.value.customs:U.value},Y=async()=>{M.value=await B()},Z=async()=>{F.value=S(await C())},ee=async()=>{J.value=await j({type:"site"})},le=async()=>{U.value=await I(),L.value=U.value.modelId,Q(G.value)};o((async()=>{E.value=!0;try{await Promise.all([Y(),Z(),ee(),le()])}finally{E.value=!1}}));const ae=()=>{$.value.validate((async e=>{if(e){N.value=!0;try{"watermark"===G.value?await T(x.value):"messageBoard"===G.value?await D(x.value):"customs"===G.value?await W(x.value):await z(x.value),q.success(a("success"))}finally{N.value=!1}(async()=>{E.value=!0;try{await le()}finally{E.value=!1}})()}}))};return(e,a)=>{const u=r("el-tab-pane"),t=r("el-tabs"),s=r("el-aside"),d=r("el-switch"),o=r("el-form-item"),q=r("el-col"),U=r("el-radio"),S=r("el-radio-group"),B=r("el-slider"),j=r("el-input"),I=r("el-row"),T=r("el-option"),D=r("el-select"),W=r("el-input-number"),z=r("el-button"),C=r("el-form"),F=r("el-main"),L=r("el-container"),O=i("loading");return n(),m(L,null,{default:p((()=>[v(s,{width:"180px",class:"pr-3"},{default:p((()=>[v(t,{modelValue:G.value,"onUpdate:modelValue":a[0]||(a[0]=e=>G.value=e),onTabClick:a[1]||(a[1]=({paneName:e})=>Q(e)),"tab-position":"left",stretch:"",class:"bg-white"},{default:p((()=>[(n(),g(b,null,c(A,(l=>v(u,{key:l,name:l,label:e.$t(`site.settings.${l}`)},null,8,["name","label"]))),64))])),_:1},8,["modelValue"])])),_:1}),v(F,{class:"p-3 app-block"},{default:p((()=>[f((n(),m(C,{ref_key:"form",ref:$,model:x.value,"label-width":"150px"},{default:p((()=>["watermark"===G.value?(n(),m(I,{key:0},{default:p((()=>[v(q,{span:24},{default:p((()=>[v(o,{prop:"enabled",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.watermark.enabled",help:""})])),default:p((()=>[v(d,{modelValue:x.value.enabled,"onUpdate:modelValue":a[2]||(a[2]=e=>x.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"overlay",label:e.$t("site.watermark.overlay"),rules:x.value.enabled?{required:!0,message:()=>e.$t("v.required")}:{}},{default:p((()=>[v(_(K),{modelValue:x.value.overlay,"onUpdate:modelValue":a[3]||(a[3]=e=>x.value.overlay=e)},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"position",label:e.$t("site.watermark.position"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:p((()=>[v(S,{modelValue:x.value.position,"onUpdate:modelValue":a[4]||(a[4]=e=>x.value.position=e)},{default:p((()=>[V("div",l,[(n(),g(b,null,c(9,(l=>v(U,{key:l,label:l,title:e.$t(`site.watermark.position.${l}`)},{default:p((()=>[R])),_:2},1032,["label","title"]))),64))])])),_:1},8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),v(q,{span:24},{default:p((()=>[v(o,{prop:"dissolve",label:e.$t("site.watermark.dissolve"),rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.watermark.dissolve",help:""})])),default:p((()=>[v(B,{modelValue:x.value.dissolve,"onUpdate:modelValue":a[5]||(a[5]=e=>x.value.dissolve=e),min:0,max:100,"show-input":""},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"minWidth",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.watermark.minWidth",help:""})])),default:p((()=>[v(j,{modelValue:x.value.minWidth,"onUpdate:modelValue":a[6]||(a[6]=e=>x.value.minWidth=e),modelModifiers:{number:!0},min:1,max:65535},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"minHeight",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.watermark.minHeight",help:""})])),default:p((()=>[v(j,{modelValue:x.value.minHeight,"onUpdate:modelValue":a[7]||(a[7]=e=>x.value.minHeight=e),modelModifiers:{number:!0},min:1,max:65535},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})):"messageBoard"===G.value?(n(),m(I,{key:1},{default:p((()=>[v(q,{span:12},{default:p((()=>[v(o,{prop:"enabled",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.messageBoard.enabled"})])),default:p((()=>[v(d,{modelValue:x.value.enabled,"onUpdate:modelValue":a[8]||(a[8]=e=>x.value.enabled=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"loginRequired",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.messageBoard.loginRequired"})])),default:p((()=>[v(d,{modelValue:x.value.loginRequired,"onUpdate:modelValue":a[9]||(a[9]=e=>x.value.loginRequired=e)},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1})])),_:1})):"customs"===G.value?(n(),m(I,{key:2},{default:p((()=>[(n(!0),g(b,null,c(_(X),(l=>(n(),m(q,{key:l.code,span:l.double?12:24},{default:p((()=>[v(o,{prop:l.code,rules:l.required?{required:!0,message:()=>e.$t("v.required")}:void 0},{label:p((()=>[v(H,{label:l.name},null,8,["label"])])),default:p((()=>[v(P,{field:l,modelValue:x.value[l.code],"onUpdate:modelValue":e=>x.value[l.code]=e,"model-key":x.value[l.code+"_key"],"onUpdate:model-key":e=>x.value[l.code+"_key"]=e},null,8,["field","modelValue","onUpdate:modelValue","model-key","onUpdate:model-key"])])),_:2},1032,["prop","rules"])])),_:2},1032,["span"])))),128))])),_:1})):(n(),m(I,{key:3},{default:p((()=>[v(q,{span:12},{default:p((()=>[v(o,{prop:"name",label:e.$t("site.name"),rules:{required:!0,message:()=>e.$t("v.required")}},{default:p((()=>[v(j,{modelValue:x.value.name,"onUpdate:modelValue":a[10]||(a[10]=e=>x.value.name=e),ref:"focus",maxlength:"50"},null,8,["modelValue"])])),_:1},8,["label","rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"protocol",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.protocol",help:""})])),default:p((()=>[v(D,{modelValue:x.value.protocol,"onUpdate:modelValue":a[11]||(a[11]=e=>x.value.protocol=e),class:"w-full"},{default:p((()=>[(n(),g(b,null,c(["http","https"],(e=>v(T,{key:e,label:e,value:e},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"domain",rules:[{required:!0,message:()=>e.$t("v.required")},{pattern:/^[a-z0-9-.]*$/,message:()=>e.$t("site.error.domainPattern")},{pattern:/^(?!(uploads|templates|WEB-INF|cp)$).*/i,message:()=>e.$t("site.error.excludesPattern")}]},{label:p((()=>[v(H,{message:"site.domain",help:""})])),default:p((()=>[v(j,{modelValue:x.value.domain,"onUpdate:modelValue":a[12]||(a[12]=e=>x.value.domain=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"subDir",rules:[{pattern:/^[\w-]*$/,message:()=>e.$t("site.error.subDirPattern")},{pattern:/^(?!(uploads|templates|WEB-INF|cp)$).*/i,message:()=>e.$t("site.error.excludesPattern")}]},{label:p((()=>[v(H,{message:"site.subDir",help:""})])),default:p((()=>[v(j,{modelValue:x.value.subDir,"onUpdate:modelValue":a[13]||(a[13]=e=>x.value.subDir=e),maxlength:"50"},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"theme",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.theme",help:""})])),default:p((()=>[v(D,{modelValue:x.value.theme,"onUpdate:modelValue":a[14]||(a[14]=e=>x.value.theme=e),class:"w-full"},{default:p((()=>[(n(!0),g(b,null,c(M.value,(e=>(n(),m(T,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"mobileTheme",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.mobileTheme",help:""})])),default:p((()=>[v(D,{modelValue:x.value.mobileTheme,"onUpdate:modelValue":a[15]||(a[15]=e=>x.value.mobileTheme=e),class:"w-full"},{default:p((()=>[(n(!0),g(b,null,c(M.value,(e=>(n(),m(T,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"modelId",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.model",help:""})])),default:p((()=>[v(D,{modelValue:x.value.modelId,"onUpdate:modelValue":a[16]||(a[16]=e=>x.value.modelId=e),class:"w-full"},{default:p((()=>[(n(!0),g(b,null,c(J.value,(e=>(n(),m(T,{key:e.id,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v(q,{span:24},{default:p((()=>[v(o,{prop:"logo"},{label:p((()=>[v(H,{message:"site.logo",help:""})])),default:p((()=>[v(_(K),{modelValue:x.value.logo,"onUpdate:modelValue":a[17]||(a[17]=e=>x.value.logo=e)},null,8,["modelValue"])])),_:1})])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"seoTitle"},{label:p((()=>[v(H,{message:"site.seoTitle",help:""})])),default:p((()=>[v(j,{modelValue:x.value.seoTitle,"onUpdate:modelValue":a[18]||(a[18]=e=>x.value.seoTitle=e),maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"seoKeywords"},{label:p((()=>[v(H,{message:"site.seoKeywords",help:""})])),default:p((()=>[v(j,{modelValue:x.value.seoKeywords,"onUpdate:modelValue":a[19]||(a[19]=e=>x.value.seoKeywords=e),maxlength:"150"},null,8,["modelValue"])])),_:1})])),_:1}),v(q,{span:24},{default:p((()=>[v(o,{prop:"seoDescription"},{label:p((()=>[v(H,{message:"site.seoDescription",help:""})])),default:p((()=>[v(j,{modelValue:x.value.seoDescription,"onUpdate:modelValue":a[20]||(a[20]=e=>x.value.seoDescription=e),type:"textarea",rows:3,maxlength:"1000"},null,8,["modelValue"])])),_:1})])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"pageSize",rules:{required:!0,message:()=>e.$t("v.required")}},{label:p((()=>[v(H,{message:"site.pageSize",help:""})])),default:p((()=>[v(W,{modelValue:x.value.pageSize,"onUpdate:modelValue":a[21]||(a[21]=e=>x.value.pageSize=e),min:1,max:200},null,8,["modelValue"])])),_:1},8,["rules"])])),_:1}),v(q,{span:12},{default:p((()=>[v(o,{prop:"status"},{label:p((()=>[v(H,{message:"site.status",help:""})])),default:p((()=>[v(S,{modelValue:x.value.status,"onUpdate:modelValue":a[22]||(a[22]=e=>x.value.status=e)},{default:p((()=>[(n(),g(b,null,c([0,1],(l=>v(U,{key:l,label:l},{default:p((()=>[w(k(e.$t(`site.status.${l}`)),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})),V("div",null,[v(z,{disabled:_(y)(`siteSettings:${G.value}:update`),loading:N.value,onClick:h(ae,["prevent"]),type:"primary","native-type":"submit"},{default:p((()=>[w(k(e.$t("save")),1)])),_:1},8,["disabled","loading","onClick"])])])),_:1},8,["model"])),[[O,E.value]])])),_:1})])),_:1})}}}),[["__scopeId","data-v-7cc76eb1"]]))}}}));
