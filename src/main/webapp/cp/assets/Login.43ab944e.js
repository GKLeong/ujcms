import{g as V,D as t,B as k,p as b,G as C,q,n as l,w as r,m as s,o as f,j as B,v as $,k as v,Q as N,a4 as U,I as D,K as E,y as M,x as R}from"./vendor.b1cbf8b1.js";import{l as S}from"./index.db1e2d33.js";const j={class:"h-full p-3 bg-gray-100"},G=R("h3",{class:"py-5 text-center text-3xl font-bold text-primary"},"UJCMS",-1),L=V({setup(I){const p=t(),a=t({}),n=t(null),u=t(!1),i=t(null),_=k(),w=b();C(()=>{i.value=_.query.redirect});const y=()=>{p.value.validate(async e=>{if(!!e){u.value=!0;try{const o=await S(a.value);if(o.status!==0){n.value=o.message;return}i.value?w.push(i.value):window.location.reload()}finally{u.value=!1}}})};return(e,o)=>{const g=s("el-alert"),m=s("el-input"),c=s("el-form-item"),h=s("el-button"),x=s("el-form");return f(),q("div",j,[l(x,{ref_key:"form",ref:p,model:a.value,class:"mx-auto md:max-w-xs"},{default:r(()=>[G,n.value?(f(),B(g,{key:0,title:n.value,type:"error",class:"mb-3",closable:!1,"show-icon":""},null,8,["title"])):$("",!0),l(c,{prop:"username",rules:[{required:!0,message:()=>e.$t("v.required")}]},{default:r(()=>[l(m,{ref:"username",modelValue:a.value.username,"onUpdate:modelValue":o[0]||(o[0]=d=>a.value.username=d),type:"text",name:"username",placeholder:e.$t("username"),"prefix-icon":v(N),autocomplete:"on"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1},8,["rules"]),l(c,{prop:"password",rules:[{required:!0,message:()=>e.$t("v.required")}]},{default:r(()=>[l(m,{ref:"password",modelValue:a.value.password,"onUpdate:modelValue":o[1]||(o[1]=d=>a.value.password=d),type:"password",name:"password",placeholder:e.$t("password"),"prefix-icon":v(U),"show-password":""},null,8,["modelValue","placeholder","prefix-icon"])]),_:1},8,["rules"]),l(h,{type:"primary","native-type":"submit",class:"w-full",loading:u.value,onClick:D(y,["prevent"])},{default:r(()=>[E(M(e.$t("login")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["model"])])}}});export{L as default};
