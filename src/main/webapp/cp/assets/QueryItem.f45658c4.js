var H=Object.defineProperty,z=Object.defineProperties;var W=Object.getOwnPropertyDescriptors;var A=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var J=(e,n,t)=>n in e?H(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,F=(e,n)=>{for(var t in n||(n={}))X.call(n,t)&&J(e,t,n[t]);if(A)for(var t of A(n))Y.call(n,t)&&J(e,t,n[t]);return e},M=(e,n)=>z(e,W(n));import{r as Q,ax as G,g as I,t as U,R as Z,j as c,o as f,k as h,w as g,l as v,P as q,A as O,q as S,C as j,m as s,F as B,y as L,aF as P,u as ee,i as T,aG as te,aH as le,I as R,aI as ne,K as ae,aJ as oe,ao as se,aK as ue,aL as re,aM as de}from"./vendor.8f1addd2.js";const K="ujcms_column_settings";function ie(){const e=localStorage.getItem(K);return e?JSON.parse(e):{}}const N=Q({}),$=Q(ie());function pe(){localStorage.setItem(K,JSON.stringify($))}const ce=e=>(N[e]||(N[e]=[]),G(N,e)),x=(e,n)=>{for(let t=0,u=e.length;t<u;)n.findIndex(m=>m.title===e[t].title)===-1?(e.splice(t,1),u-=1):t+=1;return n.forEach(t=>{e.findIndex(u=>u.title===t.title)===-1&&e.push(F({},t))}),e},me=(e,n)=>{N[e]=n,$[e]||($[e]=[]);const t=$[e];x(t,n)},D=e=>($[e]||($[e]=[]),G($,e)),Ve=I({name:"ColumnSetting",props:{name:{type:String,required:!0}},setup(e){const n=e,{name:t}=U(n),u=D(t.value),m=ce(t.value);Z(u,()=>pe(),{deep:!0});const i=()=>{u.value=x([],m.value)};return(b,d)=>{const _=c("el-icon"),r=c("el-tooltip"),V=c("el-button"),l=c("el-dropdown-item"),o=c("el-checkbox"),p=c("el-dropdown-menu"),k=c("el-dropdown");return f(),h(k,{class:"align-middle",trigger:"click","hide-on-click":!1},{dropdown:g(()=>[v(p,null,{default:g(()=>[v(l,null,{default:g(()=>[v(V,{type:"primary",onClick:i,link:""},{default:g(()=>[q(O(b.$t("table.columnsReset")),1)]),_:1})]),_:1}),(f(!0),S(B,null,j(s(u),(a,E)=>(f(),h(l,{key:a.title,divided:E===0},{default:g(()=>[v(o,{modelValue:a.display,"onUpdate:modelValue":w=>a.display=w},{default:g(()=>[q(O(a.title),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["divided"]))),128))]),_:1})]),default:g(()=>[L("span",null,[v(r,{content:b.$t("table.columnsSetting"),placement:"top"},{default:g(()=>[v(_,{class:"text-base"},{default:g(()=>[v(s(P))]),_:1})]),_:1},8,["content"])])]),_:1})}}}),ke=I({name:"ColumnList",props:{name:{type:String,required:!0}},setup(e,{slots:n}){var r,V;const{name:t}=U(e),{t:u}=ee(),m=(V=(r=n.default)==null?void 0:r.call(n))!=null?V:[],i=l=>(l==null?void 0:l.type)==="selection"?u("table.selection"):l==null?void 0:l.label,b=m.map(l=>{var o;return{title:i(l.props),display:((o=l.props)==null?void 0:o.display)!=="none"}});me(t.value,b);const d=D(t.value);return{columns:T(()=>m.filter(l=>{const o=d.value.find(p=>i(l.props)===p.title);return!o||o.display}).map(l=>M(F({},l),{key:i(l.props)})).sort((l,o)=>{let p=d.value.findIndex(a=>a.title===i(l));p<0&&(p=m.findIndex(a=>i(a)===i(l)));let k=d.value.findIndex(a=>a.title===i(o));return k<0&&(k=m.findIndex(a=>i(a)===i(o))),p-k}))}},render(){return this.columns}}),fe=I({name:"QueryInput",props:{inputs:{type:Array,required:!0},name:{type:String,required:!0}},setup(e){const{inputs:n,name:t}=U(e);return()=>n.value.find(u=>u.props.name===t.value)}}),ve={class:"flex"},_e={class:"space-y-1"},he=I({name:"QueryForm",props:{params:{type:Object,required:!0}},emits:{search:null,reset:null},setup(e){const n=e,{params:t}=U(n),u=te();le("params",t);const m=R([]),i=T(()=>{var l,o;return(o=(l=u.default)==null?void 0:l.call(u))!=null?o:[]});m.value=i.value.map(l=>{var o,p;return{label:(o=l.props)==null?void 0:o.label,name:(p=l.props)==null?void 0:p.name}});const[b]=m.value,d=R([b.name]),_=T(()=>m.value.filter(l=>!d.value.includes(l.name))),r=()=>{Object.keys(t.value).forEach(l=>{!d.value.includes(l)&&d.value.findIndex(o=>o.split(",").includes(l))===-1&&delete t.value[l]})},V=l=>{if(l===0){const[o]=_.value;d.value[d.value.length]=o.name}else d.value.splice(l,1),r()};return(l,o)=>{const p=c("el-button"),k=c("el-option"),a=c("el-select"),E=c("el-button-group");return f(),S("form",ve,[L("div",_e,[(f(!0),S(B,null,j(d.value,(w,C)=>(f(),S("div",{key:w,class:"flex"},[v(p,{icon:C==0?s(se):s(ue),onClick:y=>V(C),disabled:C<=0&&s(_).length<=0,circle:""},null,8,["icon","onClick","disabled"]),v(a,{modelValue:d.value[C],"onUpdate:modelValue":y=>d.value[C]=y,onChange:o[0]||(o[0]=y=>r()),class:"w-36"},{default:g(()=>[(f(!0),S(B,null,j(m.value.filter(y=>y.name===d.value[C]||s(_).includes(y)),y=>(f(),h(k,{key:y.name,label:y.label,value:y.name},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),v(fe,{inputs:s(i),name:d.value[C]},null,8,["inputs","name"])]))),128))]),L("div",null,[v(E,{class:"ml-2"},{default:g(()=>[v(p,{"native-type":"submit",icon:s(ne),onClick:o[1]||(o[1]=ae(w=>l.$emit("search"),["prevent"]))},{default:g(()=>[q(O(l.$t("search")),1)]),_:1},8,["icon"]),v(p,{icon:s(oe),onClick:o[2]||(o[2]=w=>l.$emit("reset"))},{default:g(()=>[q(O(l.$t("reset")),1)]),_:1},8,["icon"])]),_:1})])])}}}),ge={key:0,class:"inline-block"},Ce=I({name:"QueryItem",props:{label:{type:String,required:!0},name:{type:String,required:!0},type:{type:String},options:{type:Object}},setup(e){const n=e,t=re("params"),{name:u}=U(n),[m,i]=u.value.split(","),b=R(m),d=R(i);return(_,r)=>{const V=c("el-input-number"),l=c("el-date-picker"),o=c("el-option"),p=c("el-select"),k=c("el-input");return de(_.$slots,"default",{},()=>[e.type==="number"?(f(),S("div",ge,[v(V,{modelValue:s(t)[b.value],"onUpdate:modelValue":r[0]||(r[0]=a=>s(t)[b.value]=a),placeholder:_.$t("begin.number"),class:"w-48"},null,8,["modelValue","placeholder"]),v(V,{modelValue:s(t)[d.value],"onUpdate:modelValue":r[1]||(r[1]=a=>s(t)[d.value]=a),placeholder:_.$t("end.number"),class:"w-48"},null,8,["modelValue","placeholder"])])):e.type==="date"?(f(),h(l,{key:1,modelValue:s(t)[s(u)],"onUpdate:modelValue":r[2]||(r[2]=a=>s(t)[s(u)]=a),type:"daterange","start-placeholder":_.$t("begin.date"),"end-placeholder":_.$t("end.date"),class:"w-96"},null,8,["modelValue","start-placeholder","end-placeholder"])):e.type==="datetime"?(f(),h(l,{key:2,modelValue:s(t)[s(u)],"onUpdate:modelValue":r[3]||(r[3]=a=>s(t)[s(u)]=a),type:"datetimerange","start-placeholder":_.$t("begin.date"),"end-placeholder":_.$t("end.date"),class:"w-96"},null,8,["modelValue","start-placeholder","end-placeholder"])):e.options?(f(),h(p,{key:3,modelValue:s(t)[s(u)],"onUpdate:modelValue":r[4]||(r[4]=a=>s(t)[s(u)]=a),multiple:"",class:"w-96"},{default:g(()=>[(f(!0),S(B,null,j(e.options,a=>(f(),h(o,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])):(f(),h(k,{key:4,modelValue:s(t)[s(u)],"onUpdate:modelValue":r[5]||(r[5]=a=>s(t)[s(u)]=a),class:"w-96"},null,8,["modelValue"]))])}}});export{Ce as _,he as a,Ve as b,ke as c};
