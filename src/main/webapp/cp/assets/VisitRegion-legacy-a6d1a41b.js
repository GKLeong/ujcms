System.register(["./index-legacy-b678d1bc.js","./stat-legacy-4f174737.js"],(function(t,e){"use strict";var a,n,r,l,s,i,o,u,c,d,m,y,p,v,f,Y,g,D,b,M;return{setters:[t=>{a=t.d,n=t.u,r=t.U,l=t.r,s=t.V,i=t.o,o=t.a,u=t.c,c=t.I,d=t.j,m=t.h,y=t.w,p=t.ac,v=t.ad,f=t.k,Y=t.t,g=t.$},t=>{D=t.d,b=t.c,M=t.e}],execute:function(){const e={class:"p-3 mt-3 app-block"},h={class:"p-3 mt-3 app-block"},w={class:"p-3 mt-3 app-block"};t("default",a({__name:"VisitRegion",setup(t){const{t:a,n:C}=n();r.extend(D);const _=l("last30day"),k=t=>{switch(t){case"today":return r().format("YYYY-MM-DD");case"yesterday":return r().subtract(1,"day").format("YYYY-MM-DD");case"last7day":return r().subtract(6,"day").format("YYYY-MM-DD");case"last30day":return r().subtract(29,"day").format("YYYY-MM-DD");case"lastYear":return r().subtract(1,"year").format("YYYY-MM-DD");default:return}},x=t=>"yesterday"===t?r().subtract(1,"day").format("YYYY-MM-DD"):r().format("YYYY-MM-DD"),z=s(),S=s(),V=async t=>{(async t=>{const e=await b({begin:k(t),end:x(t)}),n=e.reduce(((t,e)=>t+e.pvCount),0),r={title:{text:a("menu.stat.visitCountry"),textStyle:{color:"#909399",fontWeight:"normal",fontSize:16}},tooltip:{trigger:"item",valueFormatter:t=>C(100*t/n,"decimal")+"%"},legend:{type:"scroll",orient:"vertical",right:"10%",top:16,bottom:16},series:[{name:a("menu.stat.visitCountry"),type:"pie",radius:"72%",center:["40%","56%"],data:e.map((t=>({value:t.pvCount,name:t.name})))}]},l=z.value;if(null==l)return;let s=g.getInstanceByDom(l);null==s&&(s=g.init(l)),s.setOption(r),window.addEventListener("resize",(function(){s&&s.resize()}))})(t),(async t=>{const e=await M({begin:k(t),end:x(t)}),n=e.reduce(((t,e)=>t+e.pvCount),0),r={title:{text:a("menu.stat.visitProvince"),textStyle:{color:"#909399",fontWeight:"normal",fontSize:16}},tooltip:{trigger:"item",valueFormatter:t=>C(100*t/n,"decimal")+"%"},legend:{type:"scroll",orient:"vertical",right:"10%",top:16,bottom:16},series:[{name:a("menu.stat.visitProvince"),type:"pie",radius:"72%",center:["40%","56%"],data:e.map((t=>({value:t.pvCount,name:t.name})))}]},l=S.value;if(null==l)return;let s=g.getInstanceByDom(l);null==s&&(s=g.init(l)),s.setOption(r),window.addEventListener("resize",(function(){s&&s.resize()}))})(t)};return i((async()=>{V(_.value)})),(t,a)=>{const n=o("el-radio-button"),r=o("el-radio-group"),l=o("el-col"),s=o("el-row");return u(),c("div",null,[d("div",e,[d("div",null,[m(r,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=t=>_.value=t),onChange:a[1]||(a[1]=t=>V(t))},{default:y((()=>[(u(),c(p,null,v(["today","yesterday","last7day","last30day","lastYear","all"],(e=>m(n,{key:e,label:e},{default:y((()=>[f(Y(t.$t(`visit.${e}`)),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])]),m(s,{gutter:12},{default:y((()=>[m(l,{span:12},{default:y((()=>[d("div",h,[d("div",{ref_key:"countryChartRef",ref:z,class:"h-80"},null,512)])])),_:1}),m(l,{span:12},{default:y((()=>[d("div",w,[d("div",{ref_key:"provinceChartRef",ref:S,class:"h-80"},null,512)])])),_:1})])),_:1})])}}}))}}}));
