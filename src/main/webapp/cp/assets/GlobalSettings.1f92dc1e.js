import{g as K,u as O,D as r,i as Q,L as R,j as f,w as l,m as i,ai as X,o as p,n as e,q as w,A as k,F as $,aj as Y,k as M,x as Z,I as ee,K as le,y as ae,J as te}from"./vendor.b1cbf8b1.js";import{_ as ue,z as q,t as oe,A as se,p as de}from"./index.db1e2d33.js";import{h as ne,q as ie,j as me,k as re,l as pe}from"./config.0ea43826.js";import{_ as n}from"./LabelTip.801ddd21.js";import{F as ge}from"./FieldItem.a4f0a73f.js";import"./BaseUpload.75d58af7.js";const ve=K({setup(fe){const{t:C}=O(),U=r(),V=r({}),t=r({}),b=r(!1),y=r(!1),L=r([]),S=r(),G=Q(()=>{var o;return JSON.parse(((o=S.value)==null?void 0:o.customs)||"[]")}),_=[];q("globalSettings:base:update")&&_.push("base"),q("globalSettings:upload:update")&&_.push("upload"),q("globalSettings:customs:update")&&_.push("customs");const m=r(_[0]),x=o=>{o==="upload"?t.value=V.value.upload:o==="customs"?t.value=V.value.customs:t.value=V.value},I=async()=>{S.value=await ne()},T=async()=>{V.value=await ie(),x(m.value)},h=async()=>{L.value=oe(await se())};R(async()=>{b.value=!0;try{await Promise.all([T(),I(),h()])}finally{b.value=!1}});const P=async()=>{b.value=!0;try{await T()}finally{b.value=!1}},B=()=>{U.value.validate(async o=>{if(!!o){y.value=!0;try{m.value==="upload"?await me(t.value):m.value==="customs"?await re(t.value):await pe(t.value),te.success(C("success"))}finally{y.value=!1}P()}})};return(o,u)=>{const D=i("el-tab-pane"),F=i("el-tabs"),H=i("el-aside"),g=i("el-input"),s=i("el-form-item"),d=i("el-col"),v=i("el-input-number"),c=i("el-row"),W=i("el-cascader"),j=i("el-button"),N=i("el-form"),A=i("el-main"),E=i("el-container"),J=X("loading");return p(),f(E,null,{default:l(()=>[e(H,{width:"180px",class:"pr-3"},{default:l(()=>[e(F,{modelValue:m.value,"onUpdate:modelValue":u[0]||(u[0]=a=>m.value=a),onTabClick:u[1]||(u[1]=({paneName:a})=>x(a)),"tab-position":"left",stretch:"",class:"bg-white"},{default:l(()=>[(p(),w($,null,k(_,a=>e(D,{key:a,name:a,label:o.$t(`global.settings.${a}`)},null,8,["name","label"])),64))]),_:1},8,["modelValue"])]),_:1}),e(A,{class:"p-3 app-block"},{default:l(()=>[Y((p(),f(N,{ref_key:"form",ref:U,model:t.value,"label-width":"150px"},{default:l(()=>[m.value==="upload"?(p(),f(c,{key:0},{default:l(()=>[e(d,{span:12},{default:l(()=>[e(s,{prop:"imageTypes",rules:{required:!0,message:()=>o.$t("v.required")}},{label:l(()=>[e(n,{message:"global.upload.imageTypes"})]),default:l(()=>[e(g,{modelValue:t.value.imageTypes,"onUpdate:modelValue":u[2]||(u[2]=a=>t.value.imageTypes=a),maxlength:"255"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"imageLimit",rules:{required:!0,message:()=>o.$t("v.required")}},{label:l(()=>[e(n,{message:"global.upload.imageLimit"})]),default:l(()=>[e(v,{modelValue:t.value.imageLimit,"onUpdate:modelValue":u[3]||(u[3]=a=>t.value.imageLimit=a),min:0,max:65535},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"videoTypes",rules:{required:!0,message:()=>o.$t("v.required")}},{label:l(()=>[e(n,{message:"global.upload.videoTypes"})]),default:l(()=>[e(g,{modelValue:t.value.videoTypes,"onUpdate:modelValue":u[4]||(u[4]=a=>t.value.videoTypes=a),maxlength:"255"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"videoLimit",rules:{required:!0,message:()=>o.$t("v.required")}},{label:l(()=>[e(n,{message:"global.upload.videoLimit"})]),default:l(()=>[e(v,{modelValue:t.value.videoLimit,"onUpdate:modelValue":u[5]||(u[5]=a=>t.value.videoLimit=a),min:0,max:65535},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"docTypes",rules:{required:!0,message:()=>o.$t("v.required")}},{label:l(()=>[e(n,{message:"global.upload.docTypes"})]),default:l(()=>[e(g,{modelValue:t.value.docTypes,"onUpdate:modelValue":u[6]||(u[6]=a=>t.value.docTypes=a),maxlength:"255"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"docLimit",rules:{required:!0,message:()=>o.$t("v.required")}},{label:l(()=>[e(n,{message:"global.upload.docLimit"})]),default:l(()=>[e(v,{modelValue:t.value.docLimit,"onUpdate:modelValue":u[7]||(u[7]=a=>t.value.docLimit=a),min:0,max:65535},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"fileTypes",rules:{required:!0,message:()=>o.$t("v.required")}},{label:l(()=>[e(n,{message:"global.upload.fileTypes"})]),default:l(()=>[e(g,{modelValue:t.value.fileTypes,"onUpdate:modelValue":u[8]||(u[8]=a=>t.value.fileTypes=a),maxlength:"255"},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"fileLimit",rules:{required:!0,message:()=>o.$t("v.required")}},{label:l(()=>[e(n,{message:"global.upload.fileLimit"})]),default:l(()=>[e(v,{modelValue:t.value.fileLimit,"onUpdate:modelValue":u[9]||(u[9]=a=>t.value.fileLimit=a),min:0,max:65535},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"imageMaxWidth",rules:{required:!0,message:()=>o.$t("v.required")}},{label:l(()=>[e(n,{message:"global.upload.imageMaxWidth"})]),default:l(()=>[e(v,{modelValue:t.value.imageMaxWidth,"onUpdate:modelValue":u[10]||(u[10]=a=>t.value.imageMaxWidth=a),min:0,max:65535},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"imageMaxHeight",rules:{required:!0,message:()=>o.$t("v.required")}},{label:l(()=>[e(n,{message:"global.upload.imageMaxHeight"})]),default:l(()=>[e(v,{modelValue:t.value.imageMaxHeight,"onUpdate:modelValue":u[11]||(u[11]=a=>t.value.imageMaxHeight=a),min:0,max:65535},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1})]),_:1})):m.value==="customs"?(p(),f(c,{key:1},{default:l(()=>[(p(!0),w($,null,k(M(G),a=>(p(),f(d,{key:a.code,span:a.double?12:24},{default:l(()=>[e(s,{prop:a.code,label:a.name,rules:a.required?{required:!0,message:()=>o.$t("v.required")}:void 0},{default:l(()=>[e(ge,{field:a,modelValue:t.value[a.code],"onUpdate:modelValue":z=>t.value[a.code]=z},null,8,["field","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","label","rules"])]),_:2},1032,["span"]))),128))]),_:1})):(p(),f(c,{key:2},{default:l(()=>[e(d,{span:12},{default:l(()=>[e(s,{prop:"port"},{label:l(()=>[e(n,{message:"global.port"})]),default:l(()=>[e(v,{modelValue:t.value.port,"onUpdate:modelValue":u[12]||(u[12]=a=>t.value.port=a),min:0,max:65535},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"contextPath"},{label:l(()=>[e(n,{message:"global.contextPath"})]),default:l(()=>[e(g,{modelValue:t.value.contextPath,"onUpdate:modelValue":u[13]||(u[13]=a=>t.value.contextPath=a),maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"channelUrl"},{label:l(()=>[e(n,{message:"global.channelUrl"})]),default:l(()=>[e(g,{modelValue:t.value.channelUrl,"onUpdate:modelValue":u[14]||(u[14]=a=>t.value.channelUrl=a),maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"articleUrl"},{label:l(()=>[e(n,{message:"global.articleUrl"})]),default:l(()=>[e(g,{modelValue:t.value.articleUrl,"onUpdate:modelValue":u[15]||(u[15]=a=>t.value.articleUrl=a),maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:12},{default:l(()=>[e(s,{prop:"defaultSiteId",label:o.$t("global.defaultSite")},{default:l(()=>[e(W,{modelValue:t.value.defaultSiteId,"onUpdate:modelValue":u[16]||(u[16]=a=>t.value.defaultSiteId=a),options:L.value,props:{value:"id",label:"name",checkStrictly:!0},onChange:u[17]||(u[17]=a=>t.value.defaultSiteId=a==null?void 0:a[a.length-1]),class:"w-full"},null,8,["modelValue","options"])]),_:1},8,["label"])]),_:1})]),_:1})),Z("div",null,[e(j,{disabled:M(de)(`globalSettings:${m.value}:update`),loading:y.value,onClick:ee(B,["prevent"]),type:"primary","native-type":"submit"},{default:l(()=>[le(ae(o.$t("submit")),1)]),_:1},8,["disabled","loading","onClick"])])]),_:1},8,["model"])),[[J,b.value]])]),_:1})]),_:1})}}});var Ue=ue(ve,[["__scopeId","data-v-4733d5ba"]]);export{Ue as default};
