var G=Object.defineProperty,J=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var H=(o,i,d)=>i in o?G(o,i,{enumerable:!0,configurable:!0,writable:!0,value:d}):o[i]=d,B=(o,i)=>{for(var d in i||(i={}))O.call(i,d)&&H(o,d,i[d]);if(S)for(var d of S(i))P.call(i,d)&&H(o,d,i[d]);return o},c=(o,i)=>J(o,K(i));import{a as Q}from"./config.03a5851f.js";import{m as X,n as Y,t as Z,l as E}from"./content.1b2aaad8.js";import{_ as x}from"./DialogForm.5f4b290f.js";import{a as W}from"./BaseUpload.vue_vue_type_style_index_0_scoped_true_lang.76c6aa5a.js";import"./index.35346a57.js";import{g as _,t as ee,I as f,i as le,M as ae,j as q,o as m,k as I,w as s,l as b,q as j,C as te,F as A,x as v,m as t}from"./vendor.7e46e91a.js";const ue={name:"BlockItemForm"},be=_(c(B({},ue),{props:{modelValue:{type:Boolean,required:!0},beanId:{required:!0},beanIds:{type:Array,required:!0},blockId:{type:Number},articleId:{type:Number},title:{type:String},description:{type:String}},emits:{"update:modelValue":null,finished:null},setup(o){const i=o,{blockId:d}=ee(i),y=f(),U=f(),a=f({}),$=f([]),r=le(()=>$.value.find(u=>{var e;return u.id===((e=y.value)!=null?e:d==null?void 0:d.value)}));return ae(async()=>{$.value=await Q()}),(u,e)=>{var w;const D=q("el-option"),z=q("el-select"),p=q("el-form-item"),k=q("el-input");return m(),I(x,{name:u.$t("menu.content.blockItem"),queryBean:t(X),createBean:t(Y),updateBean:t(Z),deleteBean:t(E),beanId:o.beanId,beanIds:o.beanIds,focus:U.value,initValues:()=>({blockId:t(d),articleId:o.articleId,title:o.title,description:o.description}),toValues:n=>{var g,V;return c(B({},n),{articleTitle:(g=n.article)==null?void 0:g.title,articleId:(V=n.article)==null?void 0:V.id})},addable:(w=t(r))==null?void 0:w.enabled,perms:"blockItem",values:a.value,"onUpdate:values":e[10]||(e[10]=n=>a.value=n),"model-value":o.modelValue,"onUpdate:modelValue":e[11]||(e[11]=n=>u.$emit("update:modelValue",n)),onFinished:e[12]||(e[12]=n=>u.$emit("finished")),onBeanChange:e[13]||(e[13]=n=>y.value=n.blockId)},{default:s(({isEdit:n})=>{var g,V,C,R,T,h,F,L,N,M;return[b(p,{prop:"blockId",label:u.$t("blockItem.block"),rules:{required:!0,message:()=>u.$t("v.required")}},{default:s(()=>[b(z,{modelValue:a.value.blockId,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.blockId=l),class:"w-full",onChange:e[1]||(e[1]=l=>y.value=l),disabled:""},{default:s(()=>[(m(!0),j(A,null,te($.value,l=>(m(),j(A,{key:l.id},[n||l.enabled?(m(),I(D,{key:0,label:l.name,value:l.id,disabled:!l.enabled},null,8,["label","value","disabled"])):v("",!0)],64))),128))]),_:2},1032,["modelValue"])]),_:2},1032,["label","rules"]),n&&a.value.articleId!=null?(m(),I(p,{key:0,label:u.$t("blockItem.articleId")},{default:s(()=>[b(k,{modelValue:a.value.articleId,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.articleId=l),disabled:""},null,8,["modelValue"])]),_:1},8,["label"])):v("",!0),n&&a.value.articleTitle!=null?(m(),I(p,{key:1,label:u.$t("blockItem.articleTitle")},{default:s(()=>[b(k,{modelValue:a.value.articleTitle,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.articleTitle=l),disabled:""},null,8,["modelValue"])]),_:1},8,["label"])):v("",!0),b(p,{prop:"title",label:u.$t("blockItem.title"),rules:{required:!0,message:()=>u.$t("v.required")}},{default:s(()=>[b(k,{modelValue:a.value.title,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.title=l),ref_key:"focus",ref:U,maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"]),a.value.articleId==null&&((g=t(r))==null?void 0:g.withLinkUrl)?(m(),I(p,{key:2,prop:"linkUrl",label:u.$t("blockItem.linkUrl"),rules:{required:(V=t(r))==null?void 0:V.linkUrlRequired,message:()=>u.$t("v.required")}},{default:s(()=>[b(k,{modelValue:a.value.linkUrl,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.linkUrl=l),maxlength:"255"},null,8,["modelValue"])]),_:1},8,["label","rules"])):v("",!0),((C=t(r))==null?void 0:C.withSubtitle)?(m(),I(p,{key:3,prop:"subtitle",label:u.$t("blockItem.subtitle"),rules:{required:(R=t(r))==null?void 0:R.subtitleRequired,message:()=>u.$t("v.required")}},{default:s(()=>[b(k,{modelValue:a.value.subtitle,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.subtitle=l),maxlength:"150"},null,8,["modelValue"])]),_:1},8,["label","rules"])):v("",!0),((T=t(r))==null?void 0:T.withDescription)?(m(),I(p,{key:4,prop:"description",label:u.$t("blockItem.description"),rules:{required:(h=t(r))==null?void 0:h.descriptionRequired,message:()=>u.$t("v.required")}},{default:s(()=>[b(k,{modelValue:a.value.description,"onUpdate:modelValue":e[7]||(e[7]=l=>a.value.description=l),type:"textarea",rows:5,maxlength:"1000"},null,8,["modelValue"])]),_:1},8,["label","rules"])):v("",!0),((F=t(r))==null?void 0:F.withImage)?(m(),I(p,{key:5,prop:"image",label:u.$t("blockItem.image"),rules:{required:(L=t(r))==null?void 0:L.imageRequired,message:()=>u.$t("v.required")}},{default:s(()=>[b(t(W),{modelValue:a.value.image,"onUpdate:modelValue":e[8]||(e[8]=l=>a.value.image=l),width:t(r).imageWidth,height:t(r).imageHeight,mode:"manual"},null,8,["modelValue","width","height"])]),_:1},8,["label","rules"])):v("",!0),((N=t(r))==null?void 0:N.withMobileImage)?(m(),I(p,{key:6,prop:"mobileImage",label:u.$t("blockItem.mobileImage"),rules:{required:(M=t(r))==null?void 0:M.mobileImageRequired,message:()=>u.$t("v.required")}},{default:s(()=>[b(t(W),{modelValue:a.value.mobileImage,"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.mobileImage=l),width:t(r).mobileImageWidth,height:t(r).mobileImageHeight,mode:"manual"},null,8,["modelValue","width","height"])]),_:1},8,["label","rules"])):v("",!0)]}),_:1},8,["name","queryBean","createBean","updateBean","deleteBean","beanId","beanIds","focus","initValues","toValues","addable","values","model-value"])}}}));export{be as _};
