var N=Object.defineProperty,E=Object.defineProperties;var K=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var g=(a,o,e)=>o in a?N(a,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[o]=e,h=(a,o)=>{for(var e in o||(o={}))L.call(o,e)&&g(a,e,o[e]);if(y)for(var e of y(o))U.call(o,e)&&g(a,e,o[e]);return a},b=(a,o)=>E(a,K(o));import{g as D,I as l,D as J,p as P,M as R,J as S,j as u,o as x,q as j,l as r,w as c,y as A,A as k,m as _,k as I,x as T,X,af as z,K as F,P as G}from"./vendor.8f1addd2.js";import{q as H,s as O,l as Q}from"./index.36604f4c.js";const W={class:"h-full p-3 bg-gray-100"},Y={class:"py-5 text-center text-3xl font-bold text-primary"},ae=D({name:"Login",setup(a){const o=l(),e=l({}),i=l(),d=l(),p=l(!1),m=l(),V=J(),q=P(),C="UJCMS";R(async()=>{i.value.focus(),i.value.select()}),S(()=>{m.value=V.query.redirect});const $=()=>{o.value.validate(async s=>{if(!!s){p.value=!0;try{const t=await H(),f=O(e.value.password,t),n=await Q(b(h({},e.value),{password:f}));if(n.status!==0){d.value=n.message;return}m.value?q.push(m.value):window.location.reload()}finally{p.value=!1}}})};return(s,t)=>{const f=u("el-alert"),n=u("el-input"),w=u("el-form-item"),B=u("el-button"),M=u("el-form");return x(),j("div",W,[r(M,{ref_key:"form",ref:o,model:e.value,class:"mx-auto md:max-w-xs"},{default:c(()=>[A("h3",Y,k(_(C)),1),d.value?(x(),I(f,{key:0,title:d.value,type:"error",class:"mb-3",closable:!1,"show-icon":""},null,8,["title"])):T("",!0),r(w,{prop:"username",rules:[{required:!0,message:()=>s.$t("v.required")}]},{default:c(()=>[r(n,{ref_key:"focus",ref:i,modelValue:e.value.username,"onUpdate:modelValue":t[0]||(t[0]=v=>e.value.username=v),name:"username",placeholder:s.$t("username"),"prefix-icon":_(X),autocomplete:"on"},null,8,["modelValue","placeholder","prefix-icon"])]),_:1},8,["rules"]),r(w,{prop:"password",rules:[{required:!0,message:()=>s.$t("v.required")}]},{default:c(()=>[r(n,{ref:"password",modelValue:e.value.password,"onUpdate:modelValue":t[1]||(t[1]=v=>e.value.password=v),type:"password",name:"password",placeholder:s.$t("password"),"prefix-icon":_(z),"show-password":""},null,8,["modelValue","placeholder","prefix-icon"])]),_:1},8,["rules"]),r(B,{type:"primary","native-type":"submit",class:"w-full",loading:p.value,onClick:F($,["prevent"])},{default:c(()=>[G(k(s.$t("login")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["model"])])}}});export{ae as default};
